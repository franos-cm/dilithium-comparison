Move start edge detector to top level
Introduce done signal latch in top level